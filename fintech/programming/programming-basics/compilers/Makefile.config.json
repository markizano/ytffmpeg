{
  "videos": [
    {
      "input": [
        { "i": "resources/compilers.mp4" },
        { "i": "resources/gnu-gcc.mp4" },
        { "i": "resources/python-record.mp4" },
        { "i": "resources/PHP-record.mp4" },
        { "i": "resources/Java-record.mp4" },
        { "loop": "true", "i": "resources/oracle-java-versions.png" }
      ],
      "output": "build/Compilers.mp4",
      "filter_complex": [
        "### Grand Opening",
        "[0:v]fps=29,trim=start=0:end=12,setpts=PTS-STARTPTS[vIntro]",
        "[0:a]atrim=start=0:end=12,asetpts=PTS-STARTPTS[aIntro]",

        "### Transition me to small to begin explaining in terminal.",
        "[0:v]fps=29,trim=start=12:end=13.3,setpts=PTS-STARTPTS,scale='lerp(iw,354,t/1.3)':'lerp(ih,630,t/1.3)':eval=frame,setsar=1:1[vTransitionSmall]",
        "[0:a]atrim=start=12:end=13.3,asetpts=PTS-STARTPTS[aTransitionSmall]",

        "[1:v]fps=29,trim=start=17:end=18.2,setpts=PTS-STARTPTS[vGCCstart]",

        "[vGCCstart][vTransitionSmall]overlay='lerp(0,363,t/1.3)':'lerp(0,1290,t/1.3)'[vTransition]",

        "### Start building the clips together.",
        "[vIntro][vTransition]concat[vopen]",
        "[aIntro][aTransitionSmall]concat=v=0:a=1[aopen]",

        "### GCC Explainer.",
        "[0:v]fps=29,trim=start=16.17:end=34.46,setpts=PTS-STARTPTS,scale=354x630,setsar=1:1,hflip[vGCCex]",
        "[0:a]atrim=start=16.17:end=34.46,asetpts=PTS-STARTPTS[aGCCexplain]",

        "[1:v]fps=29,trim=start=18.2:end=39,setpts=(PTS-STARTPTS)*0.38942[vGCCinstall]",
        "[1:v]fps=29,trim=start=43:end=78,setpts=(PTS-STARTPTS)*0.29142[vGCCrun]",
        "[vGCCinstall][vGCCrun]concat[vGCCInstall]",

        "[vGCCInstall][vGCCex]overlay=363:1290:shortest=1[vGCCexplain]",

        "### Continue building the clips.",
        "[vopen][vGCCexplain]concat[vCompileGCC]",
        "[aopen][aGCCexplain]concat=v=0:a=1[aCompileGCC]",

        "### Python Explainer",
        "[0:v]fps=29,trim=start=34.5:end=50,setpts=PTS-STARTPTS,scale=354x630,setsar=1:1[vPYex]",
        "[0:a]atrim=start=34.5:end=50,asetpts=PTS-STARTPTS[aPYexplain]",

        "[2:v]fps=29,trim=start=4:end=15,setpts=PTS-STARTPTS[vPYinstall]",
        "[2:v]fps=29,trim=start=23:end=45,setpts=PTS-STARTPTS[vPYrun]",
        "[vPYinstall][vPYrun]concat,setpts=PTS*0.469696[vPYInstall]",

        "[vPYInstall][vPYex]overlay=363:1290:shortest=1[vPYexplain]",

        "[vCompileGCC][vPYexplain]concat[vRunPy]",
        "[aCompileGCC][aPYexplain]concat=v=0:a=1[aRunPy]",

        "### PHP Explainer",
        "[0:v]fps=29,trim=start=50:end=62.1,setpts=PTS-STARTPTS,scale=354x630,setsar=1:1[vPHPex]",
        "[0:a]atrim=start=50:end=62.1,asetpts=PTS-STARTPTS[aPHPexplain]",

        "[3:v]fps=29,trim=start=3.5:end=26,setpts=PTS-STARTPTS[vPHPinstall]",
        "[3:v]fps=29,trim=start=64:end=87,setpts=PTS-STARTPTS[vPHPrun]",
        "[vPHPinstall][vPHPrun]concat,setpts=PTS*0.26593[vPHPInstall]",

        "[vPHPInstall][vPHPex]overlay=363:1290:shortest=1[vPHPexplain]",

        "[vRunPy][vPHPexplain]concat[vPHP]",
        "[aRunPy][aPHPexplain]concat=v=0:a=1[aPHP]",

        "### Java Explainer",
        "[0:v]fps=29,trim=start=62.2:end=71.5,setpts=PTS-STARTPTS,scale=354x630,setsar=1:1[vDownloadJava]",
        "[0:a]atrim=start=62.2:end=71.5,asetpts=PTS-STARTPTS[aDownloadJava]",

        "[0:v]fps=29,trim=start=75:end=77.8,setpts=PTS-STARTPTS,scale=354x630,setsar=1:1[vOpenJDK]",
        "[0:a]atrim=start=75:end=77.8,asetpts=PTS-STARTPTS[aOpenJDK]",

        "[0:v]fps=29,trim=start=77.8:end=93.85,setpts=PTS-STARTPTS,scale=354x630,setsar=1:1[vJRE]",
        "[0:a]atrim=start=77.8:end=93.85,asetpts=PTS-STARTPTS[aJRE]",

        "[vDownloadJava][vOpenJDK][vJRE]concat=n=3[vJavaEx]",
        "[aDownloadJava][aOpenJDK][aJRE]concat=v=0:a=1:n=3[aJavaExplain]",

        "[4:v]fps=29,trim=start=3:end=45,setpts=PTS-STARTPTS[vJavainstall]",
        "[4:v]fps=29,trim=start=66:end=100,setpts=PTS-STARTPTS[vJavarun]",
        "[vJavainstall][vJavarun]concat,setpts=PTS*0.37039[vJavaInstall]",

        "[vJavaInstall][vJavaEx]overlay=363:1290:shortest=1[vJavaExplain]",

        "[0:v]fps=29,trim=start=71.5:end=74.75,setpts=PTS-STARTPTS,scale=354x630,setsar=1:1,hflip[vJavaVer]",
        "[0:a]atrim=start=71.5:end=74.75,asetpts=PTS-STARTPTS[aJavaVersion]",

        "[5:v]fps=29,setsar=1:1,format=yuv420p,trim=start=0:end=3.25,crop=1080:1920:0:'lerp(700,1080,t/3.25)'[vJVerBackground]",
        "[vJVerBackground][vJavaVer]overlay=630:500[vJavaVersion]",

        "### Scale out and return to view.",
        "[0:v]fps=29,trim=start=94:end=96,setpts=PTS-STARTPTS,scale='lerp(354,1080,t/2)':'lerp(630,1920,t/2)':eval=frame,setsar=1:1[vScaleOut_]",
        "[0:a]atrim=start=94:end=96,asetpts=PTS-STARTPTS[aScaleOut]",

        "[5:v]fps=29,setsar=1:1,format=yuv420p,trim=start=0:end=2,crop=1080:1920:0:1080[vJVerBG]",
        "[vJVerBG][vScaleOut_]overlay='lerp(630,0,t/2)':'lerp(500,0,t/2)'[vScaleOut]",

        "### Now try to munge all this together.",
        "[vPHP][vJavaExplain][vJavaVersion][vScaleOut]concat=n=4[vJava]",
        "[aPHP][aJavaExplain][aJavaVersion][aScaleOut]concat=v=0:a=1:n=4[aJava]",

        "### Closing thoughts.",
        "[0:v]fps=29,trim=start=96:end=137.58,setpts=PTS-STARTPTS[vSummary]",
        "[0:a]atrim=start=96:end=137.58,asetpts=PTS-STARTPTS[aSummary]",

        "[vJava][vSummary]concat[video]",
        "[aJava][aSummary]concat=v=0:a=1[audio]"
      ]
    }
  ]
}

